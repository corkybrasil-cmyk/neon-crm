<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Funil de Vendas — Neon CRM</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-label="Neon logo">
        <svg width="42" height="36" viewBox="0 0 431 368" xmlns="http://www.w3.org/2000/svg">
          <g mask="url(#m)">
            <mask id="m" maskUnits="userSpaceOnUse" x="0" y="0" width="431" height="368">
              <path d="M0.226562 0.716797H430.663V367.476H0.226562V0.716797Z" fill="#fff"/>
            </mask>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M255.207 109.518H229.474C226.689 109.518 224.419 107.247 224.608 104.49C228.068 49.238 288.346 19.4766 323.081 16.7735C325.838 16.5573 328.081 18.8008 328.081 21.5851V55.4282C328.081 58.2394 325.757 60.456 322.973 60.6992C293.212 63.2942 273.858 91.65 269.398 105.247C268.533 107.869 270.641 110.139 273.425 110.139H301.7C303.781 110.139 305.457 111.815 305.457 113.897V116.411C305.457 118.492 303.781 120.195 301.7 120.195H273.425C270.641 120.195 268.371 122.466 268.587 125.223C271.155 159.931 300.132 176.798 323.054 178.988C325.811 179.231 328.081 181.475 328.081 184.259V216.886C328.081 219.67 325.757 221.913 322.973 221.805C249.449 218.751 226.419 159.309 224.581 125.169C224.419 122.384 226.662 120.195 229.447 120.195H255.207C257.991 120.195 260.234 117.924 260.234 115.167V114.545C260.234 111.761 257.991 109.518 255.207 109.518ZM3.98382 7.15039H39.7994C41.8808 7.15039 43.5567 8.82633 43.5567 10.9077V18.6387C43.5567 21.4229 46.3409 22.9637 48.8007 21.6121C57.1531 17.0168 75.2366 9.01555 105.106 9.01555C163.438 9.01555 203.74 50.4274 205.551 104.49C205.606 106.571 203.903 108.247 201.821 108.247H166.681C164.6 108.247 162.897 106.571 162.735 104.49C160.681 78.9724 138.029 50.4814 105.106 50.4814C55.5043 50.4814 44.8542 90.9472 43.2053 105.139C42.962 107.22 41.2591 108.869 39.1777 108.869H4.63256C2.55119 108.869 0.848268 107.22 0.848268 105.139C0.821232 97.6509 0.74015 85.4869 0.604992 71.8361C0.442811 51.3464 0.253591 27.5049 0.226562 10.8807C0.226562 8.7993 1.90246 7.15039 3.98382 7.15039ZM263.397 264.65H227.581C225.5 264.65 223.824 266.299 223.824 268.38C223.851 285.004 224.04 308.846 224.203 329.336C224.311 342.986 224.419 355.15 224.446 362.638C224.446 364.719 226.122 366.395 228.203 366.395H262.748C264.83 366.395 266.533 364.719 266.776 362.638C268.452 348.447 279.102 307.981 328.703 307.981C361.599 307.981 384.251 336.499 386.333 361.989C386.495 364.071 388.171 365.747 390.252 365.747H425.419C427.5 365.747 429.203 364.071 429.122 361.989C427.338 307.927 387.008 266.515 328.703 266.515C298.807 266.515 280.724 274.516 272.398 279.112C269.938 280.49 267.154 278.922 267.154 276.138V268.407C267.154 266.326 265.478 264.65 263.397 264.65ZM5.25427 253.972H38.556C41.3402 253.972 43.5567 251.729 43.827 248.972C45.8003 228.455 59.4507 194.936 103.862 194.936C143.327 194.936 160.248 227.644 162.6 248.972C162.924 251.729 165.141 253.972 167.925 253.972H201.2C203.984 253.972 206.227 251.729 206.038 248.972C203.713 215.534 178.44 150.335 103.862 150.335C21.5808 150.335 2.14574 215.967 0.361716 248.972C0.226564 251.729 2.47011 253.972 5.25427 253.972ZM167.898 262.758H201.2C203.984 262.758 206.227 264.974 206.092 267.758C204.335 300.737 184.873 366.395 102.592 366.395C28.0141 366.395 2.74041 301.196 0.415777 267.758C0.226561 264.974 2.47011 262.758 5.25427 262.758H38.556C41.3132 262.758 43.5567 265.001 43.854 267.758C46.2057 289.086 63.1539 321.794 102.592 321.794C147.003 321.794 160.681 288.248 162.627 267.731C162.897 264.974 165.141 262.758 167.898 262.758Z" fill="var(--logo-neon)"/>
          </g>
        </svg>
      </div>
      <div class="app-title"><span class="neon">Neon</span> CRM</div>
    </div>
    <div class="right">
      <span class="tiny">Dados salvos localmente</span>
      <button class="logout-btn" onclick="logout()">Sair</button>
    </div>
  </header>

  <div class="layout">
    <nav class="collapsed">
      <button class="tab" onclick="navigateTo('dashboard')"><span class="icon">📊</span><span class="label">Dashboard</span></button>
      <button class="tab" onclick="navigateTo('novo-lead')"><span class="icon">➕</span><span class="label">Novo Lead</span></button>
      <button class="tab active" onclick="navigateTo('funil-vendas')"><span class="icon">🧩</span><span class="label">Funil de Vendas</span></button>
      <button class="tab" onclick="navigateTo('tarefas')"><span class="icon">🗂️</span><span class="label">Tarefas</span></button>
      <button class="tab" onclick="navigateTo('pessoas-empresas')"><span class="icon">👥</span><span class="label">Pessoas & Empresas</span></button>
      <button class="tab" onclick="navigateTo('dev')"><span class="icon">🛠️</span><span class="label">Dev</span></button>
    </nav>

    <main>
      <div class="toolbar card">
        <div class="row" style="width:100%">
          <div>
            <label>Visualização</label>
            <select id="leadView">
              <option value="kanban" selected>Kanban</option>
              <option value="lista">Lista</option>
            </select>
          </div>
          <div class="right" style="align-self:flex-end;display:flex;gap:8px">
            <button id="editStages" class="ghost">Editar etapas</button>
            <button id="addStage" class="ghost hidden">+ Etapa</button>
            <button id="saveStages" class="primary hidden">Salvar etapas</button>
          </div>
        </div>
      </div>
      
      <div id="kanbanWrap" class="kanban" style="margin-top:12px"></div>
      
      <div id="listWrap" class="hidden">
        <div class="row" style="margin-bottom:8px">
          <div><label>Buscar</label><input id="leadSearch" placeholder="Digite para filtrar"/></div>
          <div><label>Colunas visíveis</label><div id="leadCols" class="row" style="gap:8px"></div></div>
        </div>
        <table class="list" id="leadTable">
          <thead>
            <tr id="leadHead"></tr>
          </thead>
          <tbody id="leadListBody"></tbody>
        </table>
      </div>
    </main>
  </div>

  <div id="modal" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="flex-between" style="margin-bottom:8px"><strong id="modalTitle">Título</strong><button id="modalClose" class="ghost">✕</button></div>
      <div id="modalBody"></div>
    </div>
  </div>

  <script src="assets/funil-vendas.js"></script>
</body>
</html>
